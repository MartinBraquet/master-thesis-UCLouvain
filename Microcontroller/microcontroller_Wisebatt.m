close all;

A = [
0	0.0006
3600	21.5
3620	0.0006
7220	21.5
7240	0.0006
10840	21.5
10860	0.0006
14460	36
14461	21.5
14481	0.0006
18081	21.5
18101	0.0006
21701	21.5
21721	0.0006
25321	21.5
25341	0.0006
28941	21.5
28961	0.0006
32561	21.5
32581	0.0006
36181	36
36182	21.5
36202	0.0006
39802	21.5
39822	0.0006
43422	21.5
43442	0.0006
47042	21.5
47062	0.0006
50662	21.5
50682	0.0006
54282	36
54283	21.5
54303	0.0006
57903	21.5
57923	0.0006
61523	21.5
61543	0.0006
65143	21.5
65163	0.0006
68763	21.5
68783	0.0006
72383	21.5
72403	0.0006
76003	36
76004	21.5
76024	0.0006
79624	21.5
79644	0.0006
83244	21.5
83264	0.0006
86864	21.5
86884	0.0006
90484	21.5
90504	2.739285714
90534	21.5
90554	2.739285714
90556	21.5
90576	2.739285714
90578	21.5
90598	2.739285714
90600	21.5
90620	2.739285714
90622	21.5
90642	2.739285714
90644	21.5
90664	2.739285714
90666	21.5
90686	2.739285714
90688	21.5
90708	2.739285714
90710	21.5
90730	2.739285714
90732	21.5
90752	2.739285714
90754	21.5
90774	2.739285714];

t1 = A(:,1);
I1 = A(:,2);

t = zeros(2*size(t1,1)-1,1);
t(1:2:end) = t1;
t(2:2:end) = t1(2:end)-0.001;

I = zeros(size(t));
I(1:2:end) = I1;
I(2:2:end) = I1(1:end-1);

F = griddedInterpolant(t,I);
fun = @(x) F(x);
I_mean = integral(fun, t(1), t(end)) / t1(end)

figure;
plot(t,I);
xlabel('Time [s]');
ylabel('Murata current [mA]');
title('Wisebatt simulation');
